@use "variables" as *;
@use "colors" as *;
@use "typography" as *;
@use "sass:color";

// Mixin display flex
@mixin flex($flex-direction, $align-items, $justify-content){
    display: flex;
    flex-direction: $flex-direction;
    align-items: $align-items;
    justify-content: $justify-content;
}
  
// Font Mixin
@mixin font($font-family, $font-size){
    font-family: $font-family;
    font-size: $font-size;
}

// Boutton extend and mixin
%btn-base {
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    padding: 0.7rem 1.4rem;
    cursor: pointer;
    padding: 1rem  2.5rem;
    width: fit-content;
    font-family: $font-medium;
}

// Modal base mixin
@mixin modal-style() {
    background-color: $bg;
    padding: $spacing-mid;
    border-radius: 1rem;
    box-shadow: $box-shadow;
    width: 90%;
    margin: auto;
}

// Card base styles
@mixin card-base($padding: $spacing-mid, $border-radius: 1rem) {
    background-color: $white;
    border-radius: $border-radius;
    padding: $padding;
    box-shadow: $box-shadow;
    border: 1px solid #e0e0e0;
}

// Card with image
@mixin image-card($image-width: 10rem, $image-height: 10rem) {
    @include card-base();
    
    .snack-image {
        width: $image-width;
        height: $image-height;
        object-fit: cover;
        border-radius: 0.5rem;
        flex-shrink: 0;
        margin: 0.5rem auto 0.3rem auto;
    }
}

// Container avec largeur responsive
@mixin responsive-container($mobile: 95%, $tablet: 85%, $desktop: 80%) {
    width: $desktop;
    margin: 2rem auto;
    
    @include mobile {
        width: $mobile;
        margin: 1rem auto;
    }
    
    @include tablet {
        width: $tablet;
    }
}

// Responsive breakpoints
@mixin mobile {
    @media screen and (max-width: 767px) {
        @content;
    }
}

@mixin tablet {
    @media screen and (min-width: 768px) and (max-width: 1299px) {
        @content;
    }
}

@mixin desktop {
    @media screen and (min-width: 1300px) {
        @content;
    }
}

@mixin mobile-tablet {
    @media screen and (max-width: 1299px) {
        @content;
    }
}

@mixin tablet-desktop {
    @media screen and (min-width: 768px) {
        @content;
    }
}

// Controls avec boutons + et -
@mixin quantity-controls($gap: 1rem) {
    @include flex(row, center, center);
    gap: $gap;
    
    .count {
        font-size: 1.5rem;
        font-family: $font-extrabold;
        min-width: 2rem;
        text-align: center;
    }
}

// Input avec icône - version corrigée
@mixin input-with-icon($icon-position: left, $icon-size: 2rem) {
    position: relative;
    
    .picto {
        position: absolute;
        width: $icon-size;
        height: $icon-size;
        top: 50%;
        transform: translateY(-50%);
        z-index: 2;
        
        @if $icon-position == left {
            left: 1rem;
        } @else {
            right: 1rem;
        }
    }
    
    input, select {
        @if $icon-position == left {
            padding-left: calc(#{$icon-size} + 2rem);
        } @else {
            padding-right: calc(#{$icon-size} + 2rem);
        }
    }
}

// States interactifs
@mixin interactive-states($base-color, $hover-darken: 10%, $active-darken: 20%) {
    background-color: $base-color;
    transition: all 0.3s ease;
    cursor: pointer;
    
    &:hover {
        background-color: color.adjust($base-color, $lightness: -$hover-darken);
        transform: scale(1.05);
    }
    
    &:active {
        background-color: color.adjust($base-color, $lightness: -$active-darken);
        transform: scale(0.98);
    }
    
    &:disabled {
        background-color: $light-gray;
        cursor: not-allowed;
        transform: none;
        opacity: 0.6;
    }
}

// Sidebar layout
@mixin sidebar-layout($sidebar-width: 40%, $main-width: 60%) {
    @include flex(row, center, space-between);
    
    .sidebar {
        width: $sidebar-width;
        height: 100%;
    }
    
    .main-content {
        width: $main-width;
        height: 100%;
    }
    
    @include mobile-tablet {
        flex-direction: column;
        
        .sidebar,
        .main-content {
            width: 100%;
            height: auto;
        }
    }
}

// Grid responsive
@mixin responsive-grid($mobile: 1, $tablet: 2, $desktop: 3, $gap: $spacing-high) {
    display: grid;
    gap: $gap;
    grid-template-columns: repeat($desktop, 1fr);
    
    @include tablet {
        grid-template-columns: repeat($tablet, 1fr);
    }
    
    @include mobile {
        grid-template-columns: repeat($mobile, 1fr);
    }
}